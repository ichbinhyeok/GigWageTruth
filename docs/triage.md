# Triage Report (Phase 0)

## 1. Domain Hardcoding & Consistency ("gigwagetruth.com" vs "gigverdict.com")
**Finding:** The application currently suffers from mixed domains, causing canonical and SEO conflicts.
**Evidence:**
- `AppConstants.java` line 22 sets `BASE_URL = "https://gigverdict.com";`
- However, "gigwagetruth.com" is hardcoded directly into multiple JTE templates for `og:image` and canonical URLs:
  - `src/main/jte/about.jte` (lines 8-9)
  - `src/main/jte/contact.jte` (lines 8-9)
  - `src/main/jte/blog/index.jte` (lines 9-10)
  - `src/main/jte/methodology.jte`, `privacy.jte`, `terms.jte`
  - `src/main/jte/pages/calculator.jte` (lines 19-20, 138, 277)
  - `src/main/jte/salary/directory.jte` (lines 8-9)

## 2. Invalid Slugs Redirect Patterns (404 Issue)
**Finding:** Invalid parameters currently issue HTTP 302 redirects instead of proper 404 Error Codes, which is an SEO anti-pattern.
**Evidence:**
- `ProgrammaticSeoController.java` lines 28-30: Invalid app name returns `"redirect:/"`.
- `ProgrammaticSeoController.java` lines 35-37: City not found returns `"redirect:/salary/directory"`.
- `ProgrammaticSeoController.java` lines 135-137, 143-145: Invalid city or work-level redirects instead of 404.

## 3. Placeholders Detection
**Finding:** A Regex Grep search for `\[[^\]]+\]` over `*.jte` files did not reveal raw `[popular nightlife district]` leftover tokens in the templates themselves. However, these tokens might be generated by backend Service classes or `WorkLevel` enums that get injected. We need to implement the Placeholder Scanner (PR4) to detect them dynamically in rendered HTML.

## 4. JSON-LD Blocks (Schema Spam Risk)
**Finding:** `application/ld+json` is widely used across templates, but needs review to remove `JobPosting` from non-job pages.
**Evidence:**
- `src/main/jte/uber.jte` & `doordash.jte`
- `src/main/jte/pages/calculator.jte`
- `src/main/jte/salary/city-work-level.jte`
- `src/main/jte/salary/city-report.jte`

## 5. Division by Zero Risk (VerdictService)
**Finding:** The engine is vulnerable to a crash / NaN issue if hours are set to 0.
**Evidence:**
- `VerdictService.java` line 16: `double netHourly = (profit - taxes) / hours;` does not guard against `hours == 0` or `hours <= 0`.
- `ProgrammaticSeoController.java` line 282: `double netHourly = netProfit / hours;` also lacks a guard.

## 6. SitemapController
**Finding:** Sitemap is generated fully dynamically, but lacks the proposed "Quality Gate" mechanism.
**Evidence:**
- `SitemapController.java` blindly loops over all `CityData.values()` and `WorkLevel.values()`.

## Action Items
All findings have been integrated into the implementation plan for Phase 1 through Phase 7.
